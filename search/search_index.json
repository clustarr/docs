{"config":{"lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Getting started Clustarr allows easy installation and maintenance of kubernetes clusters. Repositories The clustarr project consists of the following repositories. Ansible The ansible repository contains ansible configuration files. They describe how to setup the controlserver, the Proxmox VE server and how to install and configure new cluster nodes. Backend The backend repository provides a backend that is running on the controlserver. It is used by the frontend to provide a REST API to list tasks, execute new tasks (ansible playbooks), cancel tasks, provide output of tasks and list hosts. Frontend The frontend repository provides a webinterface to maintain the cluster. It communicates with the backend. See Webinterface for more info. Docs The docs repository holds the code for this documentation.","title":"Getting started"},{"location":"#getting-started","text":"Clustarr allows easy installation and maintenance of kubernetes clusters.","title":"Getting started"},{"location":"#repositories","text":"The clustarr project consists of the following repositories.","title":"Repositories"},{"location":"#ansible","text":"The ansible repository contains ansible configuration files. They describe how to setup the controlserver, the Proxmox VE server and how to install and configure new cluster nodes.","title":"Ansible"},{"location":"#backend","text":"The backend repository provides a backend that is running on the controlserver. It is used by the frontend to provide a REST API to list tasks, execute new tasks (ansible playbooks), cancel tasks, provide output of tasks and list hosts.","title":"Backend"},{"location":"#frontend","text":"The frontend repository provides a webinterface to maintain the cluster. It communicates with the backend. See Webinterface for more info.","title":"Frontend"},{"location":"#docs","text":"The docs repository holds the code for this documentation.","title":"Docs"},{"location":"ansible-configuration/","text":"Ansible configuration Some of the default ansible configuration settings must be adjusted to your network. This includes the controlserver IP address and the Proxmox VE server IP address . The other settings can be kept if the instructions have been followed exactly as described before. The files described here are located relatively to the cloned ansible repository. Controlserver The controlserver host and password can be adjusted in the inventory/hosts.ini file. The IP address or hostname of the controlserver can be specified inside the [controlserver] section. If your controlserver has the IP address 192.168.40.180 then the entry looks like this: [controlserver] 192.168.40.180 The SSH password ansible_ssh_pass and the sudo password ansible_become_password can be specified inside the [controlserver:vars] section. If your password is set to 123456 then the entry looks like this: [controlserver:vars] ansible_ssh_pass=123456 ansible_become_password=123456 Proxmox VE Host and password The Proxmox VE server host and password can be adjusted in the inventory/hosts.ini file. The IP address or hostname of the Proxmox VE server can be specified inside the [proxmox] section. If your Proxmox VE server has the IP address 192.168.40.190 then the entry looks like this: [proxmox] 192.168.40.190 The SSH password ansible_ssh_pass can be specified inside the [controlserver:vars] section. If your password is set to 123456 then the entry looks like this: [proxmox:vars] ansible_ssh_pass=123456 API credentials The credentials for the API access can be adjusted in the group_vars/all file. The following parameters are required. proxmox_api_user : Specifies the user for the API authentication. This value is visible in the Proxmox VE webinterface in the top right corner. More info here . proxmox_api_pass : Specifies the password for the API authentication. This is the same password as the password for the Proxmox VE webinterface. More info here . proxmox_api_node : Specifies the Proxmox VE node, where the new VM will be created. This value is visible in the Proxmox VE webinterface inside the datacenter overview. More info here . The default entry looks like this: proxmox_api_user: root@pam proxmox_api_pass: \"123456\" proxmox_api_node: pve VM hardware The settings that define the hardware of the VM can be adjusted in the group_vars/all file. The following parameters can be adjusted. proxmox_vm_storage : Specifies the storage identifier where to create the virtio hard disk. More info here . proxmox_vm_storage_capacity : Specifies the size of the virtio hard disk in GB. More info here . proxmox_vm_sockets : Specifies the number of CPU sockets. More info here . proxmox_vm_cores : Specifies the number of CPU cores per socket. More info here . proxmox_vm_memory : Specifies the memory size in MB. More info here . This example entry specifies VMs with a 40GB hard disk, 1 socket, 4 cores and 3GB memory: proxmox_vm_storage: local-lvm proxmox_vm_storage_capacity: 40 proxmox_vm_sockets: 1 proxmox_vm_cores: 4 proxmox_vm_memory: 3072 Node passwords The hashed password for a new node is specified in the file /roles/pxe/templates/cloud-init/user-data.yml.j2 within autoinstall.identity.password . To set a new password you have to replace the default value with the hash of your new password. To generate the hash for the password 123456 use the following command. python3 -c 'import crypt; print(crypt.crypt(\"123456\"))' Replace 123456 with your desired password. Update software The versions, urls and checksums for the software that will be downloaded while installing the controlserver can be adjusted in the group_vars/all file. Proxmox If you install a Proxmox VE version that is not based on debian buster or the package repository url has changed for any other reason, you have to adjust the following values. proxmox_enterprise_repository : Specifies the package for the enterprise repository. proxmox_no_subscription_repository : Specifies the package for the no-subscription repository. The entry for Proxmox VE 6.2 looks like this: proxmox_enterprise_repository: \"deb https://enterprise.proxmox.com/debian/pve buster pve-enterprise\" proxmox_no_subscription_repository: \"deb http://download.proxmox.com/debian/pve buster pve-no-subscription\" kubectl This section describes how to specify the kubectl release that is installed on the controlserver. kubectl_version : Specifies the kubectl version. It can be requested here . kubectl_url : Specifies the url to the kubectl release. The version is inserted into the url automatically. kubectl_checksum : Specifies the checksum type and value of the kubectl release and can be requested from the url https://storage.googleapis.com/kubernetes-release/release/{{ kubectl_version }}/bin/linux/amd64/kubectl.sha256 where {{ kubectl_version }} has to be replaced by the kubectl version (for example v1.18.6 ). An example entry looks like this: kubectl_version: v1.18.6 kubectl_url: \"https://storage.googleapis.com/kubernetes-release/release/{{ kubectl_version }}/bin/linux/amd64/kubectl\" kubectl_checksum: sha256:62fcb9922164725c7cba5747562f2ad2f4d834ad0a458c1e4c794cc203dcdfb3 Ubuntu Server This section describes how to specify the Ubuntu Server release that is installed on new hosts. ubuntu_server_url : Specifies the url to the Ubuntu Server release. It can be requested here . ubuntu_server_checksum : Specifies checksum type and value of the Ubuntu Server release and can be requested here . An example entry looks like this: ubuntu_server_url: http://releases.ubuntu.com/20.04/ubuntu-20.04.1-live-server-amd64.iso ubuntu_server_checksum: sha256:443511f6bf12402c12503733059269a2e10dec602916c0a75263e5d990f6bb93 RKE This section describes how to specify the RKE release that is installed on the controlserver. rke_version : Specifies the RKE version. It can be requested here . rke_url : Specifies the url to the RKE release. The version is inserted into the url automatically. rke_checksum : Specifies checksum type and value of the RKE release and can be requested here . An example entry looks like this: rke_version: v1.1.4 rke_url: \"https://github.com/rancher/rke/releases/download/{{ rke_version }}/rke_linux-amd64\" rke_checksum: sha256:1c7bb6e7eb3c820475b3ecbc4fc5786a912658b9d0e1f4323759c1bb72d6a758 Docker Compose This section describes how to specify the Docker Compose release that is installed on the controlserver. docker_compose_version : Specifies the Docker Compose version. It can be requested here . docker_compose_url : Specifies the url to the Docker Compose release. The version is inserted into the url automatically. docker_compose_checksum : Specifies checksum type and value of the Docker Compose release and can be requested here . An example entry looks like this: docker_compose_version: 1.26.2 docker_compose_url: \"https://github.com/docker/compose/releases/download/{{ docker_compose_version }}/docker-compose-Linux-x86_64\" docker_compose_checksum: sha256:13e50875393decdb047993c3c0192b0a3825613e6dfc0fa271efed4f5dbdd6eb","title":"Ansible configuration"},{"location":"ansible-configuration/#ansible-configuration","text":"Some of the default ansible configuration settings must be adjusted to your network. This includes the controlserver IP address and the Proxmox VE server IP address . The other settings can be kept if the instructions have been followed exactly as described before. The files described here are located relatively to the cloned ansible repository.","title":"Ansible configuration"},{"location":"ansible-configuration/#controlserver","text":"The controlserver host and password can be adjusted in the inventory/hosts.ini file. The IP address or hostname of the controlserver can be specified inside the [controlserver] section. If your controlserver has the IP address 192.168.40.180 then the entry looks like this: [controlserver] 192.168.40.180 The SSH password ansible_ssh_pass and the sudo password ansible_become_password can be specified inside the [controlserver:vars] section. If your password is set to 123456 then the entry looks like this: [controlserver:vars] ansible_ssh_pass=123456 ansible_become_password=123456","title":"Controlserver"},{"location":"ansible-configuration/#proxmox-ve","text":"","title":"Proxmox VE"},{"location":"ansible-configuration/#host-and-password","text":"The Proxmox VE server host and password can be adjusted in the inventory/hosts.ini file. The IP address or hostname of the Proxmox VE server can be specified inside the [proxmox] section. If your Proxmox VE server has the IP address 192.168.40.190 then the entry looks like this: [proxmox] 192.168.40.190 The SSH password ansible_ssh_pass can be specified inside the [controlserver:vars] section. If your password is set to 123456 then the entry looks like this: [proxmox:vars] ansible_ssh_pass=123456","title":"Host and password"},{"location":"ansible-configuration/#api-credentials","text":"The credentials for the API access can be adjusted in the group_vars/all file. The following parameters are required. proxmox_api_user : Specifies the user for the API authentication. This value is visible in the Proxmox VE webinterface in the top right corner. More info here . proxmox_api_pass : Specifies the password for the API authentication. This is the same password as the password for the Proxmox VE webinterface. More info here . proxmox_api_node : Specifies the Proxmox VE node, where the new VM will be created. This value is visible in the Proxmox VE webinterface inside the datacenter overview. More info here . The default entry looks like this: proxmox_api_user: root@pam proxmox_api_pass: \"123456\" proxmox_api_node: pve","title":"API credentials"},{"location":"ansible-configuration/#vm-hardware","text":"The settings that define the hardware of the VM can be adjusted in the group_vars/all file. The following parameters can be adjusted. proxmox_vm_storage : Specifies the storage identifier where to create the virtio hard disk. More info here . proxmox_vm_storage_capacity : Specifies the size of the virtio hard disk in GB. More info here . proxmox_vm_sockets : Specifies the number of CPU sockets. More info here . proxmox_vm_cores : Specifies the number of CPU cores per socket. More info here . proxmox_vm_memory : Specifies the memory size in MB. More info here . This example entry specifies VMs with a 40GB hard disk, 1 socket, 4 cores and 3GB memory: proxmox_vm_storage: local-lvm proxmox_vm_storage_capacity: 40 proxmox_vm_sockets: 1 proxmox_vm_cores: 4 proxmox_vm_memory: 3072","title":"VM hardware"},{"location":"ansible-configuration/#node-passwords","text":"The hashed password for a new node is specified in the file /roles/pxe/templates/cloud-init/user-data.yml.j2 within autoinstall.identity.password . To set a new password you have to replace the default value with the hash of your new password. To generate the hash for the password 123456 use the following command. python3 -c 'import crypt; print(crypt.crypt(\"123456\"))' Replace 123456 with your desired password.","title":"Node passwords"},{"location":"ansible-configuration/#update-software","text":"The versions, urls and checksums for the software that will be downloaded while installing the controlserver can be adjusted in the group_vars/all file.","title":"Update software"},{"location":"ansible-configuration/#proxmox","text":"If you install a Proxmox VE version that is not based on debian buster or the package repository url has changed for any other reason, you have to adjust the following values. proxmox_enterprise_repository : Specifies the package for the enterprise repository. proxmox_no_subscription_repository : Specifies the package for the no-subscription repository. The entry for Proxmox VE 6.2 looks like this: proxmox_enterprise_repository: \"deb https://enterprise.proxmox.com/debian/pve buster pve-enterprise\" proxmox_no_subscription_repository: \"deb http://download.proxmox.com/debian/pve buster pve-no-subscription\"","title":"Proxmox"},{"location":"ansible-configuration/#kubectl","text":"This section describes how to specify the kubectl release that is installed on the controlserver. kubectl_version : Specifies the kubectl version. It can be requested here . kubectl_url : Specifies the url to the kubectl release. The version is inserted into the url automatically. kubectl_checksum : Specifies the checksum type and value of the kubectl release and can be requested from the url https://storage.googleapis.com/kubernetes-release/release/{{ kubectl_version }}/bin/linux/amd64/kubectl.sha256 where {{ kubectl_version }} has to be replaced by the kubectl version (for example v1.18.6 ). An example entry looks like this: kubectl_version: v1.18.6 kubectl_url: \"https://storage.googleapis.com/kubernetes-release/release/{{ kubectl_version }}/bin/linux/amd64/kubectl\" kubectl_checksum: sha256:62fcb9922164725c7cba5747562f2ad2f4d834ad0a458c1e4c794cc203dcdfb3","title":"kubectl"},{"location":"ansible-configuration/#ubuntu-server","text":"This section describes how to specify the Ubuntu Server release that is installed on new hosts. ubuntu_server_url : Specifies the url to the Ubuntu Server release. It can be requested here . ubuntu_server_checksum : Specifies checksum type and value of the Ubuntu Server release and can be requested here . An example entry looks like this: ubuntu_server_url: http://releases.ubuntu.com/20.04/ubuntu-20.04.1-live-server-amd64.iso ubuntu_server_checksum: sha256:443511f6bf12402c12503733059269a2e10dec602916c0a75263e5d990f6bb93","title":"Ubuntu Server"},{"location":"ansible-configuration/#rke","text":"This section describes how to specify the RKE release that is installed on the controlserver. rke_version : Specifies the RKE version. It can be requested here . rke_url : Specifies the url to the RKE release. The version is inserted into the url automatically. rke_checksum : Specifies checksum type and value of the RKE release and can be requested here . An example entry looks like this: rke_version: v1.1.4 rke_url: \"https://github.com/rancher/rke/releases/download/{{ rke_version }}/rke_linux-amd64\" rke_checksum: sha256:1c7bb6e7eb3c820475b3ecbc4fc5786a912658b9d0e1f4323759c1bb72d6a758","title":"RKE"},{"location":"ansible-configuration/#docker-compose","text":"This section describes how to specify the Docker Compose release that is installed on the controlserver. docker_compose_version : Specifies the Docker Compose version. It can be requested here . docker_compose_url : Specifies the url to the Docker Compose release. The version is inserted into the url automatically. docker_compose_checksum : Specifies checksum type and value of the Docker Compose release and can be requested here . An example entry looks like this: docker_compose_version: 1.26.2 docker_compose_url: \"https://github.com/docker/compose/releases/download/{{ docker_compose_version }}/docker-compose-Linux-x86_64\" docker_compose_checksum: sha256:13e50875393decdb047993c3c0192b0a3825613e6dfc0fa271efed4f5dbdd6eb","title":"Docker Compose"},{"location":"development-setup/","text":"Development setup This document contains setup recommendations for development environments. Virtualization Hypervisor Virtualbox always crashed when used to virtualize Proxmox VE and nested VMs were started. QEMU should be used instead as it has not caused any problems. Networking QEMU requires a bridge as network interface. An macvtab network interfaces do not work because it blocks the host to guest communication and DHCP communication inside the nested VM does not work. For example, this guide can be used to create a bridge network interface. Clear DNS cache If you remove a host and add a new host with the same name then it also has the same hostname. This can cause problems because your local DNS cache probably still has the old IP address assigned to the hostname. Either you create new hosts with different hostnames or you clear the DNS cache manually with the following command. sudo systemd-resolve --flush-caches","title":"Development setup"},{"location":"development-setup/#development-setup","text":"This document contains setup recommendations for development environments.","title":"Development setup"},{"location":"development-setup/#virtualization","text":"","title":"Virtualization"},{"location":"development-setup/#hypervisor","text":"Virtualbox always crashed when used to virtualize Proxmox VE and nested VMs were started. QEMU should be used instead as it has not caused any problems.","title":"Hypervisor"},{"location":"development-setup/#networking","text":"QEMU requires a bridge as network interface. An macvtab network interfaces do not work because it blocks the host to guest communication and DHCP communication inside the nested VM does not work. For example, this guide can be used to create a bridge network interface.","title":"Networking"},{"location":"development-setup/#clear-dns-cache","text":"If you remove a host and add a new host with the same name then it also has the same hostname. This can cause problems because your local DNS cache probably still has the old IP address assigned to the hostname. Either you create new hosts with different hostnames or you clear the DNS cache manually with the following command. sudo systemd-resolve --flush-caches","title":"Clear DNS cache"},{"location":"how-does-it-work/","text":"How does it work? Install This section describes how to install the controlserver and the Proxmox VE server. The controlserver provides the clustarr webinterface which can be used to maintain the cluster. The Proxmox VE server is used to serve the cluster nodes as virtual machines. The controlserver and Proxmox VE server have to be in the same network subnet. The user installs Ubuntu Server on a host that is called controlserver following this guide . The user installs Proxmox VE on a host following this guide . The user installs ansible on its local machine and clones the ansible repository where the ansible playbooks are located. This guide describes how to proceed. Some of the default settings must be adjusted before proceeding, more info here . The user executes the ansible playbook to setup the controlserver. The ansible playbook connects via SSH to the controlserver and configures it. The user opens the webinterface in his webbrowser and starts the task that configures the new Proxmox VE host. Add host This section describes to add a new host. This host is not added to the kubernetes cluster automatically. The user adds a new host inside the webinterface. An ansible playbook is executed by the backend. This playbook creates a new Proxmox VM, modifies the Preboot Execution Environment (PXE) config on the controlserver and starts the VM. The PXE config allows the VM to automatically install Ubuntu Server after boot. Add host to cluster This section describes to add a previously created host to the kubernetes cluster. The user decides to add a previously added host to the cluster. He uses the corresponding button in the webinterface and selects if this host should be a master or worker node. An ansible playbook is executed, installs the dependencies on the selected host, generates an updated Rancher Kubernetes Engine (RKE) config on the controlserver and use RKE to apply cluster changes. Delete host This section describes to delete a previously created host or cluster node. The user decides to delete a host using the webinterface. The corresponding playbook stops and removes the selected Proxmox VM. If the host is a cluster node it generates an updated RKE config on the controlserver and uses RKE to apply cluster changes.","title":"How does it work?"},{"location":"how-does-it-work/#how-does-it-work","text":"","title":"How does it work?"},{"location":"how-does-it-work/#install","text":"This section describes how to install the controlserver and the Proxmox VE server. The controlserver provides the clustarr webinterface which can be used to maintain the cluster. The Proxmox VE server is used to serve the cluster nodes as virtual machines. The controlserver and Proxmox VE server have to be in the same network subnet. The user installs Ubuntu Server on a host that is called controlserver following this guide . The user installs Proxmox VE on a host following this guide . The user installs ansible on its local machine and clones the ansible repository where the ansible playbooks are located. This guide describes how to proceed. Some of the default settings must be adjusted before proceeding, more info here . The user executes the ansible playbook to setup the controlserver. The ansible playbook connects via SSH to the controlserver and configures it. The user opens the webinterface in his webbrowser and starts the task that configures the new Proxmox VE host.","title":"Install"},{"location":"how-does-it-work/#add-host","text":"This section describes to add a new host. This host is not added to the kubernetes cluster automatically. The user adds a new host inside the webinterface. An ansible playbook is executed by the backend. This playbook creates a new Proxmox VM, modifies the Preboot Execution Environment (PXE) config on the controlserver and starts the VM. The PXE config allows the VM to automatically install Ubuntu Server after boot.","title":"Add host"},{"location":"how-does-it-work/#add-host-to-cluster","text":"This section describes to add a previously created host to the kubernetes cluster. The user decides to add a previously added host to the cluster. He uses the corresponding button in the webinterface and selects if this host should be a master or worker node. An ansible playbook is executed, installs the dependencies on the selected host, generates an updated Rancher Kubernetes Engine (RKE) config on the controlserver and use RKE to apply cluster changes.","title":"Add host to cluster"},{"location":"how-does-it-work/#delete-host","text":"This section describes to delete a previously created host or cluster node. The user decides to delete a host using the webinterface. The corresponding playbook stops and removes the selected Proxmox VM. If the host is a cluster node it generates an updated RKE config on the controlserver and uses RKE to apply cluster changes.","title":"Delete host"},{"location":"setup-controlserver/","text":"Setup Controlserver Installation Download Ubuntu Server 20.04 LTS from here and start the installation. Choose Language Select English . Keyboard configuration Choose Layout: German and select Done . Network connections Leave the default settings and select Done . Configure proxy Leave the default settings and select Done . Configure Ubuntu archive mirror Leave the default settings and select Done . Guided storage configuration Leave the default settings and select Done . Storage configuration Leave the default settings and select Done . Select Continue . Profile setup Choose the settings name: Ansible servername: controlserver username: ansible password: 123456 and select Done . SSH Setup Check Install OpenSSH server and select Done . Featured Server Snaps Leave the default settings and select Done . Reboot Wait for the installation complete message and select Reboot . Execute the ansible playbook Now you can start the ansible playbook to configure the controlserver. Make sure you have adjusted the controlserver IP address first. More info here . Then run the command ansible-playbook setup-controlserver.yml -k -K and enter your password.","title":"Setup Controlserver"},{"location":"setup-controlserver/#setup-controlserver","text":"","title":"Setup Controlserver"},{"location":"setup-controlserver/#installation","text":"Download Ubuntu Server 20.04 LTS from here and start the installation.","title":"Installation"},{"location":"setup-controlserver/#choose-language","text":"Select English .","title":"Choose Language"},{"location":"setup-controlserver/#keyboard-configuration","text":"Choose Layout: German and select Done .","title":"Keyboard configuration"},{"location":"setup-controlserver/#network-connections","text":"Leave the default settings and select Done .","title":"Network connections"},{"location":"setup-controlserver/#configure-proxy","text":"Leave the default settings and select Done .","title":"Configure proxy"},{"location":"setup-controlserver/#configure-ubuntu-archive-mirror","text":"Leave the default settings and select Done .","title":"Configure Ubuntu archive mirror"},{"location":"setup-controlserver/#guided-storage-configuration","text":"Leave the default settings and select Done .","title":"Guided storage configuration"},{"location":"setup-controlserver/#storage-configuration","text":"Leave the default settings and select Done . Select Continue .","title":"Storage configuration"},{"location":"setup-controlserver/#profile-setup","text":"Choose the settings name: Ansible servername: controlserver username: ansible password: 123456 and select Done .","title":"Profile setup"},{"location":"setup-controlserver/#ssh-setup","text":"Check Install OpenSSH server and select Done .","title":"SSH Setup"},{"location":"setup-controlserver/#featured-server-snaps","text":"Leave the default settings and select Done .","title":"Featured Server Snaps"},{"location":"setup-controlserver/#reboot","text":"Wait for the installation complete message and select Reboot .","title":"Reboot"},{"location":"setup-controlserver/#execute-the-ansible-playbook","text":"Now you can start the ansible playbook to configure the controlserver. Make sure you have adjusted the controlserver IP address first. More info here . Then run the command ansible-playbook setup-controlserver.yml -k -K and enter your password.","title":"Execute the ansible playbook"},{"location":"setup-local-machine/","text":"Setup local machine Install dependencies To execute the ansible playbook that sets up the controlserver you have to install ansible and sshpass on your local machine: sudo apt-get install ansible sshpass Download ansible repository Clone the ansible repository. git clone https://github.com/clustarr/ansible Change directory to the repository. cd ansible","title":"Setup local machine"},{"location":"setup-local-machine/#setup-local-machine","text":"","title":"Setup local machine"},{"location":"setup-local-machine/#install-dependencies","text":"To execute the ansible playbook that sets up the controlserver you have to install ansible and sshpass on your local machine: sudo apt-get install ansible sshpass","title":"Install dependencies"},{"location":"setup-local-machine/#download-ansible-repository","text":"Clone the ansible repository. git clone https://github.com/clustarr/ansible Change directory to the repository. cd ansible","title":"Download ansible repository"},{"location":"setup-proxmox/","text":"Setup Proxmox VE Installation Download the Proxmox VE ISO image file from here and start the installation. Boot Select Install Proxmox VE . EULA Accept the end user license agreement. Target harddisk Select the target harddisk. Location and Timezone Choose the country, timezone and keyboard layout. Password and E-Mail Address Choose a password, confirm it and choose an email address. The default password in the ansible configuration is 123456 . If you choose a different password here, you have to adjust it in the ansible configuration too. Network configuration Specify the network configuration. Make sure that the Proxmox VE host is in the same network as the controlserver. This IP address must be adjusted in the ansible configuration later. More info here . Summary Confirm the summary to start the installation. Reboot Remember the ip address and port. Reboot the system. Access the webinterface (optional) Connect to the shown address (here https://192.168.40.190:8006/ ) and accept the self signed certificate. Login using user root and the password specified before.","title":"Setup Proxmox VE"},{"location":"setup-proxmox/#setup-proxmox-ve","text":"","title":"Setup Proxmox VE"},{"location":"setup-proxmox/#installation","text":"Download the Proxmox VE ISO image file from here and start the installation.","title":"Installation"},{"location":"setup-proxmox/#boot","text":"Select Install Proxmox VE .","title":"Boot"},{"location":"setup-proxmox/#eula","text":"Accept the end user license agreement.","title":"EULA"},{"location":"setup-proxmox/#target-harddisk","text":"Select the target harddisk.","title":"Target harddisk"},{"location":"setup-proxmox/#location-and-timezone","text":"Choose the country, timezone and keyboard layout.","title":"Location and Timezone"},{"location":"setup-proxmox/#password-and-e-mail-address","text":"Choose a password, confirm it and choose an email address. The default password in the ansible configuration is 123456 . If you choose a different password here, you have to adjust it in the ansible configuration too.","title":"Password and E-Mail Address"},{"location":"setup-proxmox/#network-configuration","text":"Specify the network configuration. Make sure that the Proxmox VE host is in the same network as the controlserver. This IP address must be adjusted in the ansible configuration later. More info here .","title":"Network configuration"},{"location":"setup-proxmox/#summary","text":"Confirm the summary to start the installation.","title":"Summary"},{"location":"setup-proxmox/#reboot","text":"Remember the ip address and port. Reboot the system.","title":"Reboot"},{"location":"setup-proxmox/#access-the-webinterface-optional","text":"Connect to the shown address (here https://192.168.40.190:8006/ ) and accept the self signed certificate. Login using user root and the password specified before.","title":"Access the webinterface (optional)"},{"location":"webinterface/","text":"Webinterface Overview The webinterface is available at the url http://<control-server-ip>/ after the controlserver is installed. It allows to automatically configure the Proxmox VE server, add Hosts, add Hosts to the kubernetes cluster and delete hosts again. Setup Proxmox VE The Proxmox VE instance must be configured once after the Proxmox VE installation. To run that configuration task, click on the \u22ee button in the menu bar and select Setup Proxmox . RKE up Within the \u22ee menu there is also an option RKE up . Normally this option is not required. But sometimes the automatically executed RKE up command by the ansible playbooks is failing. In this case the RKE up command can be triggered manually using this button. RKE remove Within the \u22ee menu there is also an option RKE remove . Normally this option is not required and should be executed with caution since this task shuts down and removes the entire cluster! Tasks Tasks overview Tasks that are currently being executed or were executed in the past are collected in the Tasks view that is reachable by the Tasks button inside the drawer on the left side. The recently executed Setup Proxmox task is currently running which is displayed by the circular progress indicator. Once the task is completed or failed, the circular progress indicator disappears and is replaced by an corresponding icon. Task output The entire task output is displayed within a popup dialog that is opened on a click of the task element. Cancel Task Running tasks can be canceled by clicking the cancel button of the task element. Hosts Hosts overview Available hosts are collected in the Hosts view that is reachable by the Hosts button inside the drawer on the left side. Add host New hosts can be added using the floating plus button in the bottom right corner. These hosts are not automatically added to the kubernetes cluster so they can also be used for other applications. Within a popup dialog the hostname can be specified. A default random hostname is generated by default. After the popup dialog confirmation, the ansible playbook automatically adds a new Proxmox VM and installs Ubuntu Server on that VM. While the task is running there is a disabled host within the hosts overview. After the task is succeeded the previously disabled host and its buttons are enabled. Add host to cluster To add a host to the kubernetes cluster click on the cloud icon inside the host element within the hosts overview. The opened popup dialog allows to change the behavior of the task. The host type of the node in the cluster can be selected here. A kubernetes cluster have to contain at least one master node that controls the worker nodes. The worker nodes executes the containers. The second options allows to disable the automatically rke up execution within the task. If this option is disabled, the RKE up task have to be executed manually afterwards to apply the changes. Delete host To delete a host the trash symbol inside the host element can be used. If the host is already a node of the cluster, the node will be removed from the cluster too. If you are sure to delete the host you have to agree the popup dialog.","title":"Webinterface"},{"location":"webinterface/#webinterface","text":"","title":"Webinterface"},{"location":"webinterface/#overview","text":"The webinterface is available at the url http://<control-server-ip>/ after the controlserver is installed. It allows to automatically configure the Proxmox VE server, add Hosts, add Hosts to the kubernetes cluster and delete hosts again.","title":"Overview"},{"location":"webinterface/#setup-proxmox-ve","text":"The Proxmox VE instance must be configured once after the Proxmox VE installation. To run that configuration task, click on the \u22ee button in the menu bar and select Setup Proxmox .","title":"Setup Proxmox VE"},{"location":"webinterface/#rke-up","text":"Within the \u22ee menu there is also an option RKE up . Normally this option is not required. But sometimes the automatically executed RKE up command by the ansible playbooks is failing. In this case the RKE up command can be triggered manually using this button.","title":"RKE up"},{"location":"webinterface/#rke-remove","text":"Within the \u22ee menu there is also an option RKE remove . Normally this option is not required and should be executed with caution since this task shuts down and removes the entire cluster!","title":"RKE remove"},{"location":"webinterface/#tasks","text":"","title":"Tasks"},{"location":"webinterface/#tasks-overview","text":"Tasks that are currently being executed or were executed in the past are collected in the Tasks view that is reachable by the Tasks button inside the drawer on the left side. The recently executed Setup Proxmox task is currently running which is displayed by the circular progress indicator. Once the task is completed or failed, the circular progress indicator disappears and is replaced by an corresponding icon.","title":"Tasks overview"},{"location":"webinterface/#task-output","text":"The entire task output is displayed within a popup dialog that is opened on a click of the task element.","title":"Task output"},{"location":"webinterface/#cancel-task","text":"Running tasks can be canceled by clicking the cancel button of the task element.","title":"Cancel Task"},{"location":"webinterface/#hosts","text":"","title":"Hosts"},{"location":"webinterface/#hosts-overview","text":"Available hosts are collected in the Hosts view that is reachable by the Hosts button inside the drawer on the left side.","title":"Hosts overview"},{"location":"webinterface/#add-host","text":"New hosts can be added using the floating plus button in the bottom right corner. These hosts are not automatically added to the kubernetes cluster so they can also be used for other applications. Within a popup dialog the hostname can be specified. A default random hostname is generated by default. After the popup dialog confirmation, the ansible playbook automatically adds a new Proxmox VM and installs Ubuntu Server on that VM. While the task is running there is a disabled host within the hosts overview. After the task is succeeded the previously disabled host and its buttons are enabled.","title":"Add host"},{"location":"webinterface/#add-host-to-cluster","text":"To add a host to the kubernetes cluster click on the cloud icon inside the host element within the hosts overview. The opened popup dialog allows to change the behavior of the task. The host type of the node in the cluster can be selected here. A kubernetes cluster have to contain at least one master node that controls the worker nodes. The worker nodes executes the containers. The second options allows to disable the automatically rke up execution within the task. If this option is disabled, the RKE up task have to be executed manually afterwards to apply the changes.","title":"Add host to cluster"},{"location":"webinterface/#delete-host","text":"To delete a host the trash symbol inside the host element can be used. If the host is already a node of the cluster, the node will be removed from the cluster too. If you are sure to delete the host you have to agree the popup dialog.","title":"Delete host"}]}